% tac.tex

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{}
  \begin{center}
    \begin{definition}[三地址代码 (Three-Address Code (TAC; 3AC))]
      每个 \red{\bf TAC} 指令\blue{\bf 最多}包含三个操作数。
    \end{definition}

    \vspace{0.80cm}
    \begin{columns}
      \column{0.50\textwidth}
        \begin{align}
          x &= y \;\op\; z \\
          x &= \op\; y \\
          x &= y
        \end{align}
      \column{0.50\textwidth}
        \pause
        \begin{align}
          \gotokw\; L \\
          \ifkw\; x \;\gotokw\; L \\
          \ifkw\; \False\; x \;\gotokw\; L \\
          \ifkw\; x \;\relop\; y \;\gotokw\; L
        \end{align}
    \end{columns}
  \end{center}
\end{frame}
%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{}
  \begin{center}
    \begin{definition}[三地址代码 (Three-Address Code (TAC; 3AC))]
      每个 \red{\bf TAC} 指令\blue{\bf 最多}包含三个操作数。
    \end{definition}

    \vspace{0.80cm}
    \begin{columns}
      \column{0.50\textwidth}
        \begin{align}
          \param\; x \\
          \call\; p, n \\
          y = \call\; p, n \\
          \return\; y
        \end{align}
      \column{0.50\textwidth}
        \fig{width = 0.40\textwidth}{figs/param-call}
        \[
          \teal{p(x_{1}, x_{2}, \dots, x_{n})}
        \]
    \end{columns}
  \end{center}
\end{frame}
%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{}
  \begin{center}
    \begin{definition}[三地址代码 (Three-Address Code (TAC; 3AC))]
      每个 \red{\bf TAC} 指令\blue{\bf 最多}包含三个操作数。
    \end{definition}

    \vspace{0.80cm}
    \begin{columns}
      \column{0.50\textwidth}
        \begin{align}
          x = y[i] \\
          x[i] = y
        \end{align}
        \begin{center}
          \purple{\bf 距离位置$y$处$i$个内存单元}
        \end{center}
      \column{0.50\textwidth}
        \pause
        \begin{align}
          x = \&y \\
          x = \ast y \\
          \ast x = y
        \end{align}
    \end{columns}
  \end{center}
\end{frame}
%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{}
  \begin{center}
    \texttt{\blue{do} i = i + 1; \blue{while} (a[i] < v);}

    \vspace{0.80cm}
    \begin{columns}
      \column{0.50\textwidth}
        \fig{width = 0.80\textwidth}{figs/do-while-tac}
      \column{0.50\textwidth}
        \pause
        \fig{width = 0.90\textwidth}{figs/do-while-tac-no}
    \end{columns}
  \end{center}
\end{frame}
%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{}
  \begin{center}
    {\bf 三地址代码的\red{\bf 四元式}表示}

    \begin{definition}[四元式 (Quadruple)]
      一个四元式包含四个字段, 分别为 $op$、$arg_{1}$、$arg_{2}$ 与 $result$。
    \end{definition}

    \pause
    \vspace{-0.50cm}
    \[
      \teal{a + a \ast (b - c) + (b - c) \ast d}
    \]
    \vspace{-0.80cm}
    \begin{columns}
      \column{0.50\textwidth}
        \fig{width = 0.60\textwidth}{figs/assign-tac}
      \column{0.50\textwidth}
        \fig{width = 0.80\textwidth}{figs/assign-quadruple}
    \end{columns}
  \end{center}
\end{frame}
%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{}
  \begin{center}
    \begin{columns}
      \column{0.50\textwidth}
        \begin{align*}
          x = y[i] \\
          x[i] = y
        \end{align*}
      \column{0.50\textwidth}
        \begin{align*}
          \blue{=\!\![\;]} \qquad y \qquad i \qquad x \\
          \blue{[\;]\!\!=} \qquad i \qquad y \qquad x
        \end{align*}
    \end{columns}

    \pause
    \vspace{0.80cm}
    \begin{columns}
      \column{0.50\textwidth}
        \begin{align*}
          x &= \&y \\
          x &= \ast y \\
          \ast x &= y
        \end{align*}
      \column{0.50\textwidth}
        \pause
        \begin{align*}
          \blue{=\!\!\&} \qquad y \qquad \qquad x \\
          \blue{=\!\!\ast} \qquad y \qquad \qquad x \\
          \blue{\ast\!\!=} \qquad y \qquad \qquad x
        \end{align*}
    \end{columns}
  \end{center}
\end{frame}
%%%%%%%%%%%%%%%%%%%%